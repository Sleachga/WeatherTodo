<!DOCTYPE html>
<html>
    <head>
        <title>Weather Todo</title>
        <meta charset="UTF-8">

        <link rel="stylesheet" href="CanvasTesting.css">
        <link rel="icon" href="favicon.ico">

        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="Rain.js"></script>
        <script src="Sun.js"></script>
        <script src="Snow.js"></script>
    </head>

    <body>
        <canvas id='canvas' width="500" height="500px"></canvas>
    </body>

    <script>
    
        const weatherTypes = ['sun', 'rain', 'snow'];
        const weather = weatherTypes[Math.floor(Math.random() * weatherTypes.length)];

        let canvas = document.getElementById('canvas')
        let context = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        $(window).resize(function(){
            canvas.width = $(window).width();
            canvas.height = $(window).height();

            if (weather == 'rain') { initRain(); }
            if (weather == 'sun') { initSun(); }
            if (weather == 'snow') { initSnow(); }
        });

        if (weather == 'rain') { initRain(); }
        if (weather == 'sun') { initSun(); }
        if (weather == 'snow') { initSnow(); }

        let fps = 60;

        // FOR MOBILE DEVICES
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))
            fps = 29;

        const interval = 1000 / fps;
        let now, delta, time;

        setInterval(function(){
            if (weather == 'rain') {
                requestAnimationFrame(drawRain);
                drawRain();
            }
            else if (weather == 'sun') {
                requestAnimationFrame(drawSun);
                drawSun();
            }
            else if (weather == 'snow') {
                requestAnimationFrame(drawSnow);
                drawSnow();
            }
        }, 1000/fps)

    </script>
</html>